(()=>{"use strict";let e,t=!1;function n(e){return 6e4*e}function o(e){let t;return t=e>=11&&e<=14?"":e%10==1?"а":e%10>=2&&e%10<=4?"ы":"",t}setTimeout((()=>{if(t){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);const s=document.getElementById("team-list"),l=n(c),i=1e3*r,m=Math.floor(l/6e4),a=(l-6e4*m)/1e3,d="Нажмите на Паузу, чтобы выбрать другого спикера",c=5,r=30;let u=document.getElementById("select-team");u.innerHTML="<input  type='text' placeholder='Выбор группы'/>",u.addEventListener("click",(function(){!async function(t){try{let n=await fetch(t);if(!n.ok)throw new Error("Код ответа сервера не 200-299.");if(e=await n.json(),s.innerHTML="",e.teams.length)for(let t=0;t<e.teams.length;t++)s.innerHTML+=`<div class="select-team__item">${e.teams[t].orgName}</div`;else s.innerHTML="Что-то пошло не так :("}catch(e){throw s.innerHTML="Данные не получены :(","Код ответа сервера не 200-299."===e.message?e:new Error(e)}}("https://ekatrif.github.io/spiker-time-control/src/team.json")})),s.addEventListener("click",(t=>function(e,t){employeesList.innerHTML="";let c=s.querySelectorAll(".select-team__item");for(let e of[...c])e.classList.remove("select-team__item_active");for(let n=0;n<e.teams.length;n++)if(t.target.textContent===e.teams[n].orgName){t.target.classList.add("select-team__item_active"),employeesList.innerHTML+=`<div class="employees__teamlead"><div class="employees__teamlead__name">${e.teams[n].teamlead.fullName}</div><div class="employees__teamlead__position">${e.teams[n].teamlead.position}</div></div>`;let o=document.createElement("div");o.setAttribute("class","employees__list"),employeesList.insertAdjacentElement("beforeend",o);let s=employeesList.querySelector(".employees__list");s.innerHTML+='<div id="employees-title" class="employees__list__title">Команда:</div>';let l=document.createElement("div");l.setAttribute("class","employees__list__body"),l.setAttribute("id","employees"),s.insertAdjacentElement("beforeend",l);let i=employeesList.querySelector(".employees__list__body");for(let t=0;t<e.teams[n].colleagues.length;t++)i.innerHTML+=`<div class="employees__list__body__item">${e.teams[n].colleagues[t].fullName}</div`}document.getElementById("employees").addEventListener("click",(function(e){e.target.classList.contains("employees__list__body__item")&&(function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let e of[...t])e.classList.remove("employees__list__body__item_active");e.target.classList.add("employees__list__body__item_active")}(e),function(e){let t,s,c,r,u,g,_=document.querySelector(".employees__list__body__item_active").textContent;t=localStorage.getItem(_)&&localStorage.getItem(_)>=0?localStorage.getItem(_):localStorage.getItem("timeForPersonSaved")?n(localStorage.getItem("timeForPersonSaved")):l,s=Math.floor(t/6e4),c=(t-6e4*s)/1e3,r=o(s),u=o(c),g="Оставшееся время";let p=`<div class="timer"><div id="timer-message" class="timer__title">Оставшееся время</div> <div class="timer__time time"><div class="time__container"><div id="mins" class="time__container__body">${s}</div><div id="minsForm" class="time__container__title">Минут${r}</div></div><div class="time__container"><div id="secs" class="time__container__body">${c}</div><div id="secsForm" class="time__container__title">Секунд${u}</div></div></div><div class="timer__buttons"><div id="start" class="button button__start">Старт</div><div id="pause" class="button button__pause">Пауза</div><div id="reset" class="button button__reset">Сброс</div></div></div>`;document.getElementById("timer").innerHTML=p;let y=!0,v=window.setInterval((function(){if(!y){let e=Math.floor(t/6e4),n=(t-6e4*e)/1e3,s=o(e),l=o(n);document.getElementById("mins").innerText=e,document.getElementById("secs").innerText=n,document.getElementById("minsForm").innerText=`Минут${s}`,document.getElementById("secsForm").innerText=`Секунд${l}`,t<=i&&(document.getElementById("timer-message").innerText="Время заканчивается",document.getElementById("mins").classList.add("time__container__body_alarm"),document.getElementById("secs").classList.add("time__container__body_alarm")),t-=1e3,t<0&&setTimeout((()=>{clearInterval(v),document.getElementById("timer-message").innerText="Время истекло";let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),localStorage.setItem(`${_}`,0),y=!0}))}}),1e3);document.getElementById("pause").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),y=!0,t<0?localStorage.setItem(_,0):localStorage.setItem(_,t)})),document.getElementById("start").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.add("plug");document.getElementsByTagName("main")[0].addEventListener("mouseover",(function(e){e.target.classList.contains("plug")&&document.getElementsByTagName("body")[0].setAttribute("data-tooltip",d)})),document.getElementsByTagName("main")[0].addEventListener("mouseout",(function(e){e.target.classList.contains("plug")&&document.getElementsByTagName("body")[0].removeAttribute("data-tooltip")})),y=!1,document.getElementById("start").classList.add("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),t=localStorage.getItem(_)&&localStorage.getItem(_)>0||0==localStorage.getItem(_)?localStorage.getItem(_):localStorage.getItem("timeForPersonSaved")?n(localStorage.getItem("timeForPersonSaved")):l})),document.getElementById("reset").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");if(document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),y=!0,localStorage.getItem("timeForPersonSaved")){localStorage.setItem(_,n(localStorage.getItem("timeForPersonSaved")));let e=localStorage.getItem("timeForPersonSaved"),t=Math.floor(n(e)/6e4),s=(n(e)-6e4*t)/1e3;document.getElementById("mins").innerText=t,document.getElementById("secs").innerText=s,document.getElementById("minsForm").innerText=`Минут${o(t)}`,document.getElementById("secsForm").innerText=`Секунд${o(s)}`}else localStorage.setItem(_,l),document.getElementById("mins").innerText=m,document.getElementById("secs").innerText=a,document.getElementById("minsForm").innerText=`Минут${o(m)}`,document.getElementById("secsForm").innerText=`Секунд${o(a)}`;document.getElementById("mins").classList.remove("time__container__body_alarm"),document.getElementById("secs").classList.remove("time__container__body_alarm"),document.getElementById("timer-message").innerText="Оставшееся время"}))}())}))}(e,t))),function(){document.getElementById("popup").setAttribute("style","display:none"),document.getElementById("settings-icon").addEventListener("click",(function(){"display:flex"===document.getElementById("popup").getAttribute("style")?(document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)):(document.getElementById("popup").setAttribute("style","display:flex"),setTimeout((function(){document.getElementById("popup").classList.toggle("popup_hidden"),document.getElementById("popup").classList.toggle("popup_visible")}),500))}));let e=document.getElementById("time-for-person");localStorage.getItem("timeForPersonSaved")?e.setAttribute("placeholder",localStorage.getItem("timeForPersonSaved")):e.setAttribute("placeholder",timeForPersonDefaultMin),document.getElementById("button-ok").addEventListener("click",(function(){localStorage.setItem("timeForPersonSaved",e.value),document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)})),document.getElementById("button-cancel").addEventListener("click",(function(){document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)}))}(),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();