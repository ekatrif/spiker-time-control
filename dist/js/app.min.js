(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);let t=document.getElementById("employeesList"),n=document.getElementById("team-list");const l=3e5,s=Math.floor(5),i=(l-6e4*s)/1e3;function o(){let e=document.querySelectorAll(".employees__list__body__item");for(let t of[...e])t.setAttribute("style","display:block");let t=document.querySelectorAll(".select-team__item");for(let e of[...t])e.setAttribute("style","display:block")}function m(e){let t,n,m,a,c,_,r=document.querySelector(".employees__list__body__item_active").textContent;t=localStorage.getItem(r)&&localStorage.getItem(r)>0?localStorage.getItem(r):l,n=Math.floor(t/6e4),m=(t-6e4*n)/1e3,a=d(n),c=d(m),_="Оставшееся время";let u=`<div class="timer"><div id="timer-message" class="timer__title">Оставшееся время</div> <div class="timer__time time"><div class="time__container"><div id="mins" class="time__container__body">${n}</div><div id="minsForm" class="time__container__title">Минут${a}</div></div><div class="time__container"><div id="secs" class="time__container__body">${m}</div><div id="secsForm" class="time__container__title">Секунд${c}</div></div></div><div class="timer__buttons"><div id="start" class="button button__start">Старт</div><div id="pause" class="button button__pause">Пауза</div><div id="reset" class="button button__reset">Сброс</div></div></div>`;document.getElementById("timer").innerHTML=u;let y=!0,g=window.setInterval((function(){if(!y){let e=Math.floor(t/6e4),n=(t-6e4*e)/1e3,l=d(e),s=d(n);document.getElementById("mins").innerText=e,document.getElementById("secs").innerText=n,document.getElementById("minsForm").innerText=`Минут${l}`,document.getElementById("secsForm").innerText=`Секунд${s}`,t<=3e4&&(document.getElementById("timer-message").innerText="Время заканчивается",document.getElementById("mins").classList.add("time__container__body_alarm"),document.getElementById("secs").classList.add("time__container__body_alarm")),t-=1e3,t<0&&setTimeout((()=>{clearInterval(g),document.getElementById("timer-message").innerText="Время истекло",o()}))}}),1e3);document.getElementById("pause").addEventListener("click",(function(){document.getElementById("employees-title").textContent="Команда",document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),y=!0,localStorage.setItem(`${r}`,t),o()})),document.getElementById("start").addEventListener("click",(function(){document.getElementById("employees-title").textContent="Спикер",function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let n of[...t])e.target.textContent!==n.textContent&&n.setAttribute("style","display:none")}(e),function(){let e=document.querySelectorAll(".select-team__item");for(let t of[...e])t.classList.contains("select-team__item_active")||t.setAttribute("style","display:none")}(),y=!1,document.getElementById("start").classList.add("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),t=localStorage.getItem(r)&&localStorage.getItem(r)>0?localStorage.getItem(r):l})),document.getElementById("reset").addEventListener("click",(function(){document.getElementById("employees-title").textContent="Команда",document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),y=!0,document.getElementById("mins").innerText=s,document.getElementById("secs").innerText=i,document.getElementById("minsForm").innerText=`Минут${d(s)}`,document.getElementById("secsForm").innerText=`Секунд${d(i)}`,localStorage.setItem(`${r}`,0),document.getElementById("mins").classList.remove("time__container__body_alarm"),document.getElementById("secs").classList.remove("time__container__body_alarm"),document.getElementById("timer-message").innerText="Оставшееся время",o()}))}function d(e){let t;return t=e>=11&&e<=14?"":e%10==1?"а":e%10>=2&&e%10<=4?"ы":"",t}let a=document.getElementById("select-team");a.innerHTML="<input  type='text' placeholder='Выбор группы'/>",a.addEventListener("click",(function(){getJson("https://ekatrif.github.io/spiker-time-control/src/team.json")})),n.addEventListener("click",(e=>function(e,l){t.innerHTML="";let s=n.querySelectorAll(".select-team__item");for(let e of[...s])e.classList.remove("select-team__item_active");for(let n=0;n<e.teams.length;n++)if(l.target.textContent===e.teams[n].orgName){l.target.classList.add("select-team__item_active"),t.innerHTML+=`<div class="employees__teamlead"><div class="employees__teamlead__name">${e.teams[n].teamlead.fullName}</div><div class="employees__teamlead__position">${e.teams[n].teamlead.position}</div></div>`;let s=document.createElement("div");s.setAttribute("class","employees__list"),t.insertAdjacentElement("beforeend",s);let i=t.querySelector(".employees__list");i.innerHTML+='<div id="employees-title" class="employees__list__title">Команда:</div>';let o=document.createElement("div");o.setAttribute("class","employees__list__body"),o.setAttribute("id","employees"),i.insertAdjacentElement("beforeend",o);let m=t.querySelector(".employees__list__body");for(let t=0;t<e.teams[n].colleagues.length;t++)m.innerHTML+=`<div class="employees__list__body__item">${e.teams[n].colleagues[t].fullName}</div`}document.getElementById("employees").addEventListener("click",(function(e){e.target.classList.contains("employees__list__body__item")&&(!function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let e of[...t])e.classList.remove("employees__list__body__item_active");e.target.classList.add("employees__list__body__item_active")}(e),m(e))}))}(jsonData,e))),document.getElementById("settings-icon").addEventListener("click",(function(){"display:flex"===document.getElementById("popup").getAttribute("style")?document.getElementById("popup").setAttribute("style","display:none"):document.getElementById("popup").setAttribute("style","display:flex")})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();