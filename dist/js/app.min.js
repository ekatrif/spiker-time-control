(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);let t=document.getElementById("employeesList"),n=document.getElementById("team-list");const o=i(5),l=Math.floor(o/6e4),s=(o-6e4*l)/1e3;function i(e){return 6e4*e}let m;async function d(e){try{let t=await fetch(e);if(!t.ok)throw new Error("Код ответа сервера не 200-299.");m=await t.json(),function(e){if(n.innerHTML="",e.teams.length)for(let t=0;t<e.teams.length;t++)n.innerHTML+=`<div class="select-team__item">${e.teams[t].orgName}</div`;else n.innerHTML="Данные не получены :("}(m)}catch(e){throw n.innerHTML="Данные не получены :(","Код ответа сервера не 200-299."===e.message?e:new Error("Данные не получены")}}function c(){let e=document.querySelectorAll(".employees__list__body__item");for(let t of[...e])t.setAttribute("style","display:block");let t=document.querySelectorAll(".select-team__item");for(let e of[...t])e.setAttribute("style","display:block")}function a(e){let t,n,m,d,a,u,_=document.querySelector(".employees__list__body__item_active").textContent;t=localStorage.getItem(_)&&localStorage.getItem(_)>0?localStorage.getItem(_):localStorage.getItem("timeForPersonSaved")?i(localStorage.getItem("timeForPersonSaved")):o,n=Math.floor(t/6e4),m=(t-6e4*n)/1e3,d=r(n),a=r(m),u="Оставшееся время";let g=`<div class="timer"><div id="timer-message" class="timer__title">Оставшееся время</div> <div class="timer__time time"><div class="time__container"><div id="mins" class="time__container__body">${n}</div><div id="minsForm" class="time__container__title">Минут${d}</div></div><div class="time__container"><div id="secs" class="time__container__body">${m}</div><div id="secsForm" class="time__container__title">Секунд${a}</div></div></div><div class="timer__buttons"><div id="start" class="button button__start">Старт</div><div id="pause" class="button button__pause">Пауза</div><div id="reset" class="button button__reset">Сброс</div></div></div>`;document.getElementById("timer").innerHTML=g;let y=!0,p=window.setInterval((function(){if(!y){let e=Math.floor(t/6e4),n=(t-6e4*e)/1e3,o=r(e),l=r(n);document.getElementById("mins").innerText=e,document.getElementById("secs").innerText=n,document.getElementById("minsForm").innerText=`Минут${o}`,document.getElementById("secsForm").innerText=`Секунд${l}`,t<=3e4&&(document.getElementById("timer-message").innerText="Время заканчивается",document.getElementById("mins").classList.add("time__container__body_alarm"),document.getElementById("secs").classList.add("time__container__body_alarm")),t-=1e3,t<0&&setTimeout((()=>{clearInterval(p),document.getElementById("timer-message").innerText="Время истекло",c()}))}}),1e3);document.getElementById("pause").addEventListener("click",(function(){document.getElementById("employees-title").textContent="Команда",document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),y=!0,localStorage.setItem(`${_}`,t),c()})),document.getElementById("start").addEventListener("click",(function(){document.getElementById("employees-title").textContent="Спикер",function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let n of[...t])e.target.textContent!==n.textContent&&n.setAttribute("style","display:none")}(e),function(){let e=document.querySelectorAll(".select-team__item");for(let t of[...e])t.classList.contains("select-team__item_active")||t.setAttribute("style","display:none")}(),y=!1,document.getElementById("start").classList.add("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),t=localStorage.getItem(_)&&localStorage.getItem(_)>0?localStorage.getItem(_):localStorage.getItem("timeForPersonSaved")?i(localStorage.getItem("timeForPersonSaved")):o})),document.getElementById("reset").addEventListener("click",(function(){if(document.getElementById("employees-title").textContent="Команда",document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),y=!0,localStorage.getItem("timeForPersonSaved")){let e=localStorage.getItem("timeForPersonSaved"),t=Math.floor(i(e)/6e4);document.getElementById("mins").innerText=t,document.getElementById("secs").innerText=(i(e)-6e4*t)/1e3}else document.getElementById("mins").innerText=l,document.getElementById("secs").innerText=s,ию;document.getElementById("minsForm").innerText=`Минут${r(l)}`,document.getElementById("secsForm").innerText=`Секунд${r(s)}`,localStorage.setItem(`${_}`,0),document.getElementById("mins").classList.remove("time__container__body_alarm"),document.getElementById("secs").classList.remove("time__container__body_alarm"),document.getElementById("timer-message").innerText="Оставшееся время",c()}))}function r(e){let t;return t=e>=11&&e<=14?"":e%10==1?"а":e%10>=2&&e%10<=4?"ы":"",t}let u=document.getElementById("select-team");u.innerHTML="<input  type='text' placeholder='Выбор группы'/>",u.addEventListener("click",(function(){d("https://ekatrif.github.io/spiker-time-control/src/team.json")})),n.addEventListener("click",(e=>function(e,o){t.innerHTML="";let l=n.querySelectorAll(".select-team__item");for(let e of[...l])e.classList.remove("select-team__item_active");for(let n=0;n<e.teams.length;n++)if(o.target.textContent===e.teams[n].orgName){o.target.classList.add("select-team__item_active"),t.innerHTML+=`<div class="employees__teamlead"><div class="employees__teamlead__name">${e.teams[n].teamlead.fullName}</div><div class="employees__teamlead__position">${e.teams[n].teamlead.position}</div></div>`;let l=document.createElement("div");l.setAttribute("class","employees__list"),t.insertAdjacentElement("beforeend",l);let s=t.querySelector(".employees__list");s.innerHTML+='<div id="employees-title" class="employees__list__title">Команда:</div>';let i=document.createElement("div");i.setAttribute("class","employees__list__body"),i.setAttribute("id","employees"),s.insertAdjacentElement("beforeend",i);let m=t.querySelector(".employees__list__body");for(let t=0;t<e.teams[n].colleagues.length;t++)m.innerHTML+=`<div class="employees__list__body__item">${e.teams[n].colleagues[t].fullName}</div`}document.getElementById("employees").addEventListener("click",(function(e){e.target.classList.contains("employees__list__body__item")&&(!function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let e of[...t])e.classList.remove("employees__list__body__item_active");e.target.classList.add("employees__list__body__item_active")}(e),a(e))}))}(m,e))),document.getElementById("popup").setAttribute("style","display:none"),document.getElementById("settings-icon").addEventListener("click",(function(){"display:flex"===document.getElementById("popup").getAttribute("style")?(document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)):(document.getElementById("popup").setAttribute("style","display:flex"),setTimeout((function(){document.getElementById("popup").classList.toggle("popup_hidden"),document.getElementById("popup").classList.toggle("popup_visible")}),500))}));let _=document.getElementById("time-for-person");localStorage.getItem("timeForPersonSaved")?_.setAttribute("placeholder",localStorage.getItem("timeForPersonSaved")):_.setAttribute("placeholder",5),document.getElementById("button-ok").addEventListener("click",(function(){localStorage.setItem("timeForPersonSaved",_.value),document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)})),document.getElementById("button-cancel").addEventListener("click",(function(){document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();