(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);const t=s(5),n=Math.floor(t/6e4),o=(t-6e4*n)/1e3;function s(e){return 6e4*e}let l;async function i(e){try{let t=await fetch(e);if(!t.ok)throw new Error("Код ответа сервера не 200-299.");l=await t.json(),function(e){if(c.innerHTML="",e.teams.length)for(let t=0;t<e.teams.length;t++)c.innerHTML+=`<div class="select-team__item">${e.teams[t].orgName}</div`;else c.innerHTML="Данные не получены :("}(l)}catch(e){throw c.innerHTML="Данные не получены :(","Код ответа сервера не 200-299."===e.message?e:new Error("Данные не получены")}}function m(e){let t;return t=e>=11&&e<=14?"":e%10==1?"а":e%10>=2&&e%10<=4?"ы":"",t}let a=document.getElementById("select-team");a.innerHTML="<input  type='text' placeholder='Выбор группы'/>",a.addEventListener("click",(function(){i("https://ekatrif.github.io/spiker-time-control/src/team.json")}));let d=document.getElementById("employeesList"),c=document.getElementById("team-list");c.addEventListener("click",(e=>function(e,l){d.innerHTML="";let i=c.querySelectorAll(".select-team__item");for(let e of[...i])e.classList.remove("select-team__item_active");for(let t=0;t<e.teams.length;t++)if(l.target.textContent===e.teams[t].orgName){l.target.classList.add("select-team__item_active"),d.innerHTML+=`<div class="employees__teamlead"><div class="employees__teamlead__name">${e.teams[t].teamlead.fullName}</div><div class="employees__teamlead__position">${e.teams[t].teamlead.position}</div></div>`;let n=document.createElement("div");n.setAttribute("class","employees__list"),d.insertAdjacentElement("beforeend",n);let o=d.querySelector(".employees__list");o.innerHTML+='<div id="employees-title" class="employees__list__title">Команда:</div>';let s=document.createElement("div");s.setAttribute("class","employees__list__body"),s.setAttribute("id","employees"),o.insertAdjacentElement("beforeend",s);let i=d.querySelector(".employees__list__body");for(let n=0;n<e.teams[t].colleagues.length;n++)i.innerHTML+=`<div class="employees__list__body__item">${e.teams[t].colleagues[n].fullName}</div`}document.getElementById("employees").addEventListener("click",(function(e){e.target.classList.contains("employees__list__body__item")&&(function(e){let t=document.querySelectorAll(".employees__list__body__item");for(let e of[...t])e.classList.remove("employees__list__body__item_active");e.target.classList.add("employees__list__body__item_active")}(e),function(e){let l,i,a,d,c,r,u=document.querySelector(".employees__list__body__item_active").textContent;l=localStorage.getItem(u)&&localStorage.getItem(u)>=0?localStorage.getItem(u):localStorage.getItem("timeForPersonSaved")?s(localStorage.getItem("timeForPersonSaved")):t,i=Math.floor(l/6e4),a=(l-6e4*i)/1e3,d=m(i),c=m(a),r="Оставшееся время";let g=`<div class="timer"><div id="timer-message" class="timer__title">Оставшееся время</div> <div class="timer__time time"><div class="time__container"><div id="mins" class="time__container__body">${i}</div><div id="minsForm" class="time__container__title">Минут${d}</div></div><div class="time__container"><div id="secs" class="time__container__body">${a}</div><div id="secsForm" class="time__container__title">Секунд${c}</div></div></div><div class="timer__buttons"><div id="start" class="button button__start">Старт</div><div id="pause" class="button button__pause">Пауза</div><div id="reset" class="button button__reset">Сброс</div></div></div>`;document.getElementById("timer").innerHTML=g;let _=!0,p=window.setInterval((function(){if(!_){let e=Math.floor(l/6e4),t=(l-6e4*e)/1e3,n=m(e),o=m(t);document.getElementById("mins").innerText=e,document.getElementById("secs").innerText=t,document.getElementById("minsForm").innerText=`Минут${n}`,document.getElementById("secsForm").innerText=`Секунд${o}`,l<=3e4&&(document.getElementById("timer-message").innerText="Время заканчивается",document.getElementById("mins").classList.add("time__container__body_alarm"),document.getElementById("secs").classList.add("time__container__body_alarm")),l-=1e3,l<0&&setTimeout((()=>{clearInterval(p),document.getElementById("timer-message").innerText="Время истекло";let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),localStorage.setItem(`${u}`,0),_=!0}))}}),1e3);document.getElementById("pause").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.add("button__pause_disable"),_=!0,l<0?localStorage.setItem(u,0):localStorage.setItem(u,l)})),document.getElementById("start").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.add("plug");document.getElementsByTagName("main")[0].addEventListener("mouseover",(function(e){e.target.classList.contains("plug")&&document.getElementsByTagName("body")[0].setAttribute("data-tooltip","Нажмите на Паузу, чтобы выбрать другого спикера")})),document.getElementsByTagName("main")[0].addEventListener("mouseout",(function(e){e.target.classList.contains("plug")&&document.getElementsByTagName("body")[0].removeAttribute("data-tooltip")})),_=!1,document.getElementById("start").classList.add("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),l=localStorage.getItem(u)&&localStorage.getItem(u)>0||0==localStorage.getItem(u)?localStorage.getItem(u):localStorage.getItem("timeForPersonSaved")?s(localStorage.getItem("timeForPersonSaved")):t})),document.getElementById("reset").addEventListener("click",(function(){let e=document.getElementsByTagName("section");for(let t=0;t<[...e].length-1;t++)e[t].classList.remove("plug");if(document.getElementsByTagName("body")[0].removeAttribute("data-tooltip"),document.getElementById("start").classList.remove("button__start_disable"),document.getElementById("pause").classList.remove("button__pause_disable"),_=!0,localStorage.getItem("timeForPersonSaved")){localStorage.setItem(u,s(localStorage.getItem("timeForPersonSaved")));let e=localStorage.getItem("timeForPersonSaved"),t=Math.floor(s(e)/6e4),n=(s(e)-6e4*t)/1e3;document.getElementById("mins").innerText=t,document.getElementById("secs").innerText=n,document.getElementById("minsForm").innerText=`Минут${m(t)}`,document.getElementById("secsForm").innerText=`Секунд${m(n)}`}else localStorage.setItem(u,t),document.getElementById("mins").innerText=n,document.getElementById("secs").innerText=o,document.getElementById("minsForm").innerText=`Минут${m(n)}`,document.getElementById("secsForm").innerText=`Секунд${m(o)}`;document.getElementById("mins").classList.remove("time__container__body_alarm"),document.getElementById("secs").classList.remove("time__container__body_alarm"),document.getElementById("timer-message").innerText="Оставшееся время"}))}())}))}(l,e))),document.getElementById("popup").setAttribute("style","display:none"),document.getElementById("settings-icon").addEventListener("click",(function(){"display:flex"===document.getElementById("popup").getAttribute("style")?(document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)):(document.getElementById("popup").setAttribute("style","display:flex"),setTimeout((function(){document.getElementById("popup").classList.toggle("popup_hidden"),document.getElementById("popup").classList.toggle("popup_visible")}),500))}));let r=document.getElementById("time-for-person");localStorage.getItem("timeForPersonSaved")?r.setAttribute("placeholder",localStorage.getItem("timeForPersonSaved")):r.setAttribute("placeholder",5),document.getElementById("button-ok").addEventListener("click",(function(){localStorage.setItem("timeForPersonSaved",r.value),document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)})),document.getElementById("button-cancel").addEventListener("click",(function(){document.getElementById("popup").classList.toggle("popup_visible"),document.getElementById("popup").classList.toggle("popup_hidden"),setTimeout((function(){document.getElementById("popup").setAttribute("style","display:none")}),500)})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();